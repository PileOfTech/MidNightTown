(function(){angular.module("oxymoron.config.http",[]).config(["$httpProvider","$locationProvider","$stateProvider",function(e){e.defaults.headers.common["X-Requested-With"]="AngularXMLHttpRequest",e.defaults.paramSerializer="$httpParamSerializerJQLike"}]),angular.module("oxymoron.config.states",[]).config(["$locationProvider","$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider",function(e,n,t){e.html5Mode({enabled:!0,requireBase:!1}),t.rule(function(e,t){var r=t.path(),o="/"===r[r.length-1];if(n.oxymoron_location=t,o)return r.substr(0,r.length-1)});var r=function(o,n){return function(e,t){try{-1!=(e=angular.isArray(e)?e:[e]).indexOf(o)&&t(n)}catch(r){console.error(r)}}};n.rails=function(){return n.state("root_path",{url:"/",templateUrl:function(e){return e["ng-view"]="",Routes.root_path(e)},controller:"GenresCtrl as ctrl",resolve:{action:["$stateParams",function(e){return r("index",e)}]}}).state("new_user_session_path",{url:"/users/sign_in",templateUrl:function(e){return e["ng-view"]="",Routes.new_user_session_path(e)},controller:"UsersSessionsCtrl as ctrl",resolve:{action:["$stateParams",function(e){return r("new",e)}]}}).state("new_user_password_path",{url:"/users/password/new",templateUrl:function(e){return e["ng-view"]="",Routes.new_user_password_path(e)},controller:"DevisePasswordsCtrl as ctrl",resolve:{action:["$stateParams",function(e){return r("new",e)}]}}).state("edit_user_password_path",{url:"/users/password/edit",templateUrl:function(e){return e["ng-view"]="",Routes.edit_user_password_path(e)},controller:"DevisePasswordsCtrl as ctrl",resolve:{action:["$stateParams",function(e){return r("edit",e)}]}}).state("cancel_user_registration_path",{url:"/users/cancel",templateUrl:function(e){return e["ng-view"]="",Routes.cancel_user_registration_path(e)},controller:"DeviseRegistrationsCtrl as ctrl",resolve:{action:["$stateParams",function(e){return r("cancel",e)}]}}).state("new_user_registration_path",{url:"/users/sign_up",templateUrl:function(e){return e["ng-view"]="",Routes.new_user_registration_path(e)},controller:"DeviseRegistrationsCtrl as ctrl",resolve:{action:["$stateParams",function(e){return r("new",e)}]}}).state("edit_user_registration_path",{url:"/users/edit",templateUrl:function(e){return e["ng-view"]="",Routes.edit_user_registration_path(e)},controller:"DeviseRegistrationsCtrl as ctrl",resolve:{action:["$stateParams",function(e){return r("edit",e)}]}}).state("genre_pack_path",{url:"/genres/:genre_id/packs/:id",templateUrl:function(e){return e["ng-view"]="",Routes.genre_pack_path(e)},controller:"PacksCtrl as ctrl",resolve:{action:["$stateParams",function(e){return r("show",e)}]}}).state("genres_path",{url:"/genres",templateUrl:function(e){return e["ng-view"]="",Routes.genres_path(e)},controller:"GenresCtrl as ctrl",resolve:{action:["$stateParams",function(e){return r("index",e)}]}}).state("genre_path",{url:"/genres/:id",templateUrl:function(e){return e["ng-view"]="",Routes.genre_path(e)},controller:"GenresCtrl as ctrl",resolve:{action:["$stateParams",function(e){return r("show",e)}]}}).state("contacts_path",{url:"/contacts",templateUrl:function(e){return e["ng-view"]="",Routes.contacts_path(e)},controller:"GenresCtrl as ctrl",resolve:{action:["$stateParams",function(e){return r("contacts",e)}]}}).state("price_list_path",{url:"/price_list",templateUrl:function(e){return e["ng-view"]="",Routes.price_list_path(e)},controller:"GenresCtrl as ctrl",resolve:{action:["$stateParams",function(e){return r("price_list",e)}]}}).state("pack_path",{url:"/packs/:id",templateUrl:function(e){return e["ng-view"]="",Routes.pack_path(e)},controller:"PacksCtrl as ctrl",resolve:{action:["$stateParams",function(e){return r("show",e)}]}}).state("image_path",{url:"/images/:id",templateUrl:function(e){return e["ng-view"]="",Routes.image_path(e)},controller:"ImagesCtrl as ctrl",resolve:{action:["$stateParams",function(e){return r("show",e)}]}}),n}}]).config(["$provide",function(e){e.decorator("$state",["$delegate",function(e){var n=e;n.baseGo=n.go;var t=function(e,t,r){if(r=r||{},n.defaultParams){var o=angular.copy(n.defaultParams);t=angular.extend(o,t)}r.inherit=!1,n.baseGo(e,t,r)};return n.go=t,e}])}]),angular.module("oxymoron.config.debug",[]).config(["$compileProvider",function(e){e.debugInfoEnabled(!1)}]),angular.module("oxymoron.config",["oxymoron.config.http","oxymoron.config.states","oxymoron.config.debug"]),angular.module("oxymoron.services.interceptor",[]).factory("httpInterceptor",["$q","$rootScope","$log",function(t,r){return{request:function(e){return r.$broadcast("loading:progress"),e||t.when(e)},response:function(e){return r.$broadcast("loading:finish",e),e||t.when(e)},responseError:function(e){return r.$broadcast("loading:error",e),t.reject(e)}}}]).config(["$httpProvider",function(e){e.interceptors.push("httpInterceptor")}]),angular.module("oxymoron.services.resources",[]).factory("resourceDecorator",[function(){return function(e){return e}}]).factory("GenrePack",["$resource","resourceDecorator",function(e,t){return t(e("/genres/:genre_id/packs/:id.json",{genre_id:"@genre_id",id:"@id"},{"new":{method:"GET",url:"/genres/:genre_id/packs/:id/new.json"},edit:{method:"GET",url:"/genres/:genre_id/packs/:id/edit.json"},update:{method:"PUT"},create:{method:"POST"},destroy:{method:"DELETE"}}))}]).factory("Genre",["$resource","resourceDecorator",function(e,t){return t(e("/genres/:id.json",{id:"@id"},{"new":{method:"GET",url:"/genres/:id/new.json"},edit:{method:"GET",url:"/genres/:id/edit.json"},update:{method:"PUT"},create:{method:"POST"},destroy:{method:"DELETE"}}))}]).factory("Pack",["$resource","resourceDecorator",function(e,t){return t(e("/packs/:id.json",{id:"@id"},{"new":{method:"GET",url:"/packs/:id/new.json"},edit:{method:"GET",url:"/packs/:id/edit.json"},update:{method:"PUT"},create:{method:"POST"},destroy:{method:"DELETE"}}))}]).factory("Image",["$resource","resourceDecorator",function(e,t){return t(e("/images/:id.json",{id:"@id"},{"new":{method:"GET",url:"/images/:id/new.json"},edit:{method:"GET",url:"/images/:id/edit.json"},update:{method:"PUT"},create:{method:"POST"},destroy:{method:"DELETE"}}))}]),angular.module("oxymoron.services.sign",[]).service("Sign",["$http",function(r){var e=this;e.out=function(e){r["delete"](Routes.destroy_user_session_path()).success(function(){e&&e()})},e["in"]=function(e,t){r.post(Routes.user_session_path(),{user:e}).success(function(){t&&t()})},e.up=function(e,t){r.post(Routes.user_registration_path(),{user:e}).success(function(){t&&t()})}}]),angular.module("oxymoron.services.validate",[]).factory("Validate",[function(){return function(o,e){try{var n=angular.element(document.querySelector('[name="'+o+'"]')).scope()[o]}catch(a){n={}}angular.element(document.querySelectorAll(".rails-errors")).remove(),angular.forEach(n,function(r,e){0!=e.indexOf("$")&&angular.forEach(r.$error,function(e,t){r.$setValidity(t,null)})}),angular.forEach(e,function(e,t){var r=o+"["+t+"]";try{n[r]&&(n[r].$setTouched(),n[r].$setDirty(),n[r].$setValidity("server",!1)),angular.element(document.querySelector('[name="'+r+'"]')).parent().append('<div class="rails-errors" ng-messages="'+r+'.$error"><div ng-message="server">'+e[0]+"</div></div>")}catch(a){console.log(a),console.warn("Element with name "+r+" not found for validation.")}})}}]),angular.module("oxymoron.services.notice",[]).service("Notice",["ngNotify",function(r){this.callback=function(e,t){r.set(t.data.msg||t.data.error,e)}}]),angular.module("oxymoron.services",["oxymoron.services.interceptor","oxymoron.services.notice","oxymoron.services.resources","oxymoron.services.sign","oxymoron.services.validate"]),angular.module("oxymoron.directives.contentFor",[]).directive("contentFor",["$compile",function(s){return{compile:function(n){var a=n.html();return{pre:function(e,t,r){var o=angular.element(document.querySelectorAll('[ng-yield="'+r.contentFor+'"]'));return"true"==o.attr("only-text")&&(a=n.text().replace(/(?:\r\n|\r|\n)/g," ")),o.html((o.attr("prefix")||"")+a+(o.attr("postfix")||"")),s(o)(e),t.remove()}}}}}]),angular.module("oxymoron.directives.fileupload",[]).directive("fileupload",["$http","$timeout","$cookies","ngNotify",function(e,t,a,s){return{scope:{fileupload:"=",ngModel:"=",hash:"=",percentCompleted:"=",maxSize:"="},restrict:"A",link:function(o,e,n){o.percentCompleted=undefined,e.bind("change",function(){var t=!0;o.xhr&&o.xhr.abort();var r=new FormData;if(angular.forEach(e[0].files,function(e){o.maxSize&&e.size/1024/1024>o.maxSize?t=!1:r.append("attachments[]",e)}),!t)return s.set("File size is more then "+o.maxSize+" Mb","error"),!1;o.xhr=new XMLHttpRequest,o.percentCompleted=0,o.xhr.upload.onprogress=function(e){o.$apply(function(){e.lengthComputable&&(o.percentCompleted=Math.round(e.loaded/e.total*100))})},o.xhr.onload=function(){var e=JSON.parse(this.responseText);200==this.status?o.$apply(function(){o.hash?(o.ngModel=o.ngModel||{},angular.forEach(e,function(e,t){o.ngModel[t]=o.ngModel[t]||[],angular.forEach(e,function(e){o.ngModel[t].push(e)})})):n.multiple?(o.ngModel=o.ngModel||[],angular.forEach(e,function(e){o.ngModel.push(e)})):o.ngModel=e[0],o.percentCompleted=undefined}):s.set(e.msg||"Uploading error","error")},o.xhr.open("POST",o.fileupload),o.xhr.setRequestHeader("X-XSRF-Token",a.get("XSRF-TOKEN")),o.xhr.send(r),e[0].value=""})}}}]),angular.module("oxymoron.directives.clickOutside",[]).directive("clickOutside",["$document",function(o){return{restrict:"A",scope:{clickOutside:"&",clickOutsideIf:"="},link:function(t,r){var e=function(e){t.clickOutsideIf&&r!==e.target&&!r[0].contains(e.target)&&document.body.contains(e.target)&&t.$apply(function(){t.$eval(t.clickOutside)})};o.bind("click",e),t.$on("$destroy",function(){o.unbind("click",e)})}}}]),angular.module("oxymoron.directives",["oxymoron.directives.fileupload","oxymoron.directives.contentFor","oxymoron.directives.clickOutside"]),angular.module("oxymoron.notifier",[]).run(["$rootScope","ngNotify","Validate","$state","$http","$location","Notice",function(e,t,r,o,n,a,s){t.config({theme:"pure",position:"top",duration:2e3,type:"info"});var i=function(e,t){t.data&&angular.isObject(t.data)&&((t.data.msg||t.data.error)&&s.callback(e,t),t.data.errors&&r(t.data.form_name||t.config.data.form_name,t.data.errors),t.data.reload?t.data.redirect_to_url?window.location=t.data.redirect_to_url:t.data.redirect_to&&o.transitionTo(t.data.redirect_to,t.data.redirect_options||{},{notify:!1,location:!0,reload:!0}):t.data.redirect_to_url?a.url(t.data.redirect_to_url):t.data.redirect_to&&o.go(t.data.redirect_to,t.data.redirect_options||{}),t.data.reload&&window.location.reload())};e.$on("loading:finish",function(e,t){i("success",t)}),e.$on("loading:error",function(e,t){i("error",t)})}]),angular.module("oxymoron",["ngNotify","ngCookies","ui.router","ngResource","oxymoron.directives","oxymoron.services","oxymoron.config","oxymoron.notifier"])}).call(this),function(){var e=function(){var a=this,e={root:{defaults:{},path:"/"},new_user_session:{defaults:{},path:"/users/sign_in"},user_session:{defaults:{},path:"/users/sign_in"},destroy_user_session:{defaults:{},path:"/users/sign_out"},new_user_password:{defaults:{},path:"/users/password/new"},edit_user_password:{defaults:{},path:"/users/password/edit"},user_password:{defaults:{},path:"/users/password"},cancel_user_registration:{defaults:{},path:"/users/cancel"},new_user_registration:{defaults:{},path:"/users/sign_up"},edit_user_registration:{defaults:{},path:"/users/edit"},user_registration:{defaults:{},path:"/users"},genre_pack:{defaults:{},path:"/genres/:genre_id/packs/:id"},genres:{defaults:{},path:"/genres"},genre:{defaults:{},path:"/genres/:id"},contacts:{defaults:{},path:"/contacts"},price_list:{defaults:{},path:"/price_list"},images:{defaults:{},path:"/images"},download:{defaults:{},path:"/download"},packs:{defaults:{},path:"/packs"},pack:{defaults:{},path:"/packs/:id"},image:{defaults:{},path:"/images/:id"}};a.defaultParams={};var s=function(e,t){var r=[];for(var o in e)if(e.hasOwnProperty(o)){var n=t?t+"["+(Array.isArray(e)?"":o)+"]":o,a=e[o];r.push("object"==typeof a?s(a,n):encodeURIComponent(n)+"="+encodeURIComponent(a))}return r.join("&")},i=function(e,t){return delete(e=angular.copy(e))[t],e};angular.forEach(e,function(r,t){var n="",o=function(o){o.format&&(n+="."+o.format);o=i(o,"format");return angular.forEach(o,function(e,t){var r=":"+t;-1!=n.search(r)&&(n=n.replace(r,e),o=i(o,t))}),-1!=n.search(/\*\w+/)&&(n=n.replace(/\*(\w+)/,function(e,t){return o[t]})),Object.keys(o).length&&(n+="?"+s(o)),n};a[t+"_path"]=function(e){e=angular.extend(angular.copy(r.defaults),e||{});n=r.path;var t=angular.copy(a.defaultParams);return o(angular.extend(t,e))},a[t+"_url"]=function(e){return window.location.origin+a[t+"_path"](e)}})};window.Routes=new e}.call(this);